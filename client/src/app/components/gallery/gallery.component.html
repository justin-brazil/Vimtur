<div *ngIf="media; else loading" class="gallery">
  <a
    routerLink="/viewer"
    *ngFor="let m of media"
    class="d-block h-100 image-container"
    data-toggle="tooltip"
    data-placement="bottom"
    [title]="m.path"
    (click)="collectionService.goto(m.hash)"
  >
    <app-preview
      class="img-fluid img-thumbnail gallery-img"
      [slideshow]="true"
      [height]="210"
      *ngIf="m.type === 'video'; else still"
      [media]="m"
    ></app-preview>
    <ng-template #still>
      <img
        class="img-fluid img-thumbnail gallery-img"
        [src]="'/cache/thumbnails/' + m.hash + '.png'"
      />
    </ng-template>
    <div class="type caption">
      <strong>{{ getTitle(m) }}</strong>
      <div class="subtitle">{{ getSubtitle(m) }}</div>
    </div>
  </a>
</div>

<ng-template #loading>
  <div class="loading">
    Loading gallery media
    <ngb-progressbar type="info" [value]="100" [striped]="true" [animated]="true"></ngb-progressbar>
  </div>
</ng-template>
